---
layout: post
title:  "QEMU 虚拟机网络配置"
subtitle: ""
date:   2019-9-17 16:56:09 +0800
categories: [qemu, net]
---

需要理清的概念包括：网桥（bridge）、网卡、tap

## 1.user 模式

用户模式的网络配置不需要管理员权限，虚拟机能够连接到宿主机，但是宿主机无法感知到虚拟机。

以虚拟机视角：

1. 虚拟机 ip 默认为 10.0.2.15，可通过`net=addr[/mask]`子选项修改；
2. 宿主机 ip 默认为 10.0.2.2，可通过`host=addr`子选项修改；
3. dns 默认为 10.0.2.3，可通过`dns=addr`子选项修改；

注意：这里的虚拟机 ip 和宿主机 ip 与真实物理世界的 ip 没有联系，虚拟机可通过宿主机 ip 向宿主机传输数据，但是宿主机无法通过虚拟机 ip 与虚拟机通信。这几个 ip 只对虚拟机有意义，因此，都可以在启动时修改。通过这种方式虚拟机可以使用网络。

以宿主机视角：

​	什么都没有。。

user 模式适合简单快速地让虚拟机连上网络，但是无法进行更多的配置。类似 vmware 中的 NAT 模式。

## 2.bridge 模式

网桥模式需要修改宿主机网络配置，

